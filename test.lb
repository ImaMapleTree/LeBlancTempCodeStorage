using random;
using datelib;

func main() {
    List input = [];
    double st = epoch();
    runner();
    print("Async:");
    print(epoch() - st);
    st = epoch();
    test(input);
    print("Test:");
    print(epoch() - st);


}

func runner() {
    List new_list = [];
    group async_group;

    List promises = [];
    for int i in 0 to 30 {
        promises.append(a -> async_group);
    }
    print("Promise:");
    print(promises);

    async_group.pipe_async(new_list);

    print(new_list.length());
}

func test(List input) returns int {
    for int i in 0 to 300000 {
        random(0, 100);
    }
    return 0;
}

func a(List input) returns int {
    for int i in 0 to 10000 {
        random(0, 100);
    }
    return 0;
}